<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Sharing Files Via Nginx on Linux - DQWYY ★ BLOG</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="DQWYY ★ BLOG"><meta name="msapplication-TileImage" content="https://cdn.jsdelivr.net/gh/dqwyy/blog-img/0000/avatar.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="DQWYY ★ BLOG"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Sometimes we will have the need to share files to other people. If it is just a small file, such as a word document or an image with the size smaller than 5 MB, then sending it via email or instant me"><meta property="og:type" content="blog"><meta property="og:title" content="Sharing Files Via Nginx on Linux"><meta property="og:url" content="https://blog.dqwyy.moe/0006/"><meta property="og:site_name" content="DQWYY ★ BLOG"><meta property="og:description" content="Sometimes we will have the need to share files to other people. If it is just a small file, such as a word document or an image with the size smaller than 5 MB, then sending it via email or instant me"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://japan.zdnet.com/storage/2019/12/16/90ea835f97305edaa324d8c8a9226cf8/nginx.png"><meta property="article:published_time" content="2023-03-28T05:19:44.000Z"><meta property="article:modified_time" content="2023-12-05T03:23:55.522Z"><meta property="article:author" content="dqwyy"><meta property="article:tag" content="Technology"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://japan.zdnet.com/storage/2019/12/16/90ea835f97305edaa324d8c8a9226cf8/nginx.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.dqwyy.moe/0006/"},"headline":"Sharing Files Via Nginx on Linux","image":["https://japan.zdnet.com/storage/2019/12/16/90ea835f97305edaa324d8c8a9226cf8/nginx.png"],"datePublished":"2023-03-28T05:19:44.000Z","dateModified":"2023-12-05T03:23:55.522Z","author":{"@type":"Person","name":"dqwyy"},"publisher":{"@type":"Organization","name":"DQWYY ★ BLOG","logo":{"@type":"ImageObject","url":{"text":"《 DQWYY ★ BLOG 》"}}},"description":"Sometimes we will have the need to share files to other people. If it is just a small file, such as a word document or an image with the size smaller than 5 MB, then sending it via email or instant me"}</script><link rel="canonical" href="https://blog.dqwyy.moe/0006/"><link rel="icon" href="https://cdn.jsdelivr.net/gh/dqwyy/blog-img/0000/avatar.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><meta name="generator" content="Hexo 5.4.2"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">《 DQWYY ★ BLOG 》</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">🏠 Home</a><a class="navbar-item" href="/archives">🗃️ Archives</a><a class="navbar-item" href="/categories">🌐 Languages</a><a class="navbar-item" href="/tags">🏷️ Tags</a><a class="navbar-item" href="/about">ℹ️ About</a></div><div class="navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://japan.zdnet.com/storage/2019/12/16/90ea835f97305edaa324d8c8a9226cf8/nginx.png" alt="Sharing Files Via Nginx on Linux"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 level is-mobile"><div class="level-left"><span class="level-item is-uppercase">Posted&nbsp;<time dateTime="2023-03-28T05:19:44.000Z" title="3/28/2023, 5:19:44 AM">March 28, 2023</time></span><span class="level-item"><a class="link-muted" href="/categories/English/"><i class="fas fa-globe mr-1"></i>English</a></span></div></div><h1 class="title is-3 is-size-3-mobile is-size-2" style="font-weight:bold;">Sharing Files Via Nginx on Linux</h1><div class="content"><p>Sometimes we will have the need to share files to other people. If it is just a small file, such as a word document or an image with the size smaller than 5 MB, then sending it via email or instant messaging apps like WeChat will be enough. However, when it comes to large files such as videos, email or instant messaging apps won’t allow you to send because they have the size limitation for the attachment. Maybe someone will use cloud storage service like Google Drive, OneDrive, Baidu Netdisk and Mega.nz but these aren’t the best choice because you need to upload your files to their server and other people will download them from their server, this is not peer-to-peer, it will cost double time or even more if the server limits your download speed. So I think the best solution is to serve the files locally, of course you will need a public IP address before doing this. I will take Ubuntu for example.</p>
<span id="more"></span>
<p>There is a simplest way to serve static contents, just use Python 3’s <code>http.server</code> module, which is a equivalent for the <code>SimpleHTTPServer</code> module from Python 2. For example, if you want to share your files from the <code>/home/dqwyy/www/</code> directory, just change directory and locate into it, and then run the command</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python3 -m http.server 8000</span><br></pre></td></tr></table></figure>

<p>Then your files will be accessible on <a target="_blank" rel="noopener" href="http://localhost:8000/">http://localhost:8000</a>. This is the simplest way but maybe not stable and customizable enough although we don’t need to customize that much. So maybe we can try <a target="_blank" rel="noopener" href="https://nginx.org/en/docs/beginners_guide.html">Nginx</a> instead. The official website already showed us how to install the latest version of Nginx from Nginx’s own repository, but I don’t really need the latest version so I will just install it from Ubuntu’s repository and I will choose the light version, which is enough for me.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install nginx-light</span><br></pre></td></tr></table></figure>

<p>After installation, Nginx will auto run when the system starts and serve the files from the directory <code>/var/www/</code>, now we will edit the config file <code>/etc/nginx/nginx.conf</code> to change the directory to <code>/home/dqwyy/www/</code> instead. First of all, let’s backup the config file. Secondly, delete the demo site config files on <code>/etc/nginx/sites-enabled/default</code> and <code>/etc/nginx/sites-available/default</code>, or our further changes will not work. If you don’t want to delete them, you can also command out <code>include /etc/nginx/sites-enabled/*;</code> from the config file instead. Lastly we will edit the config file to insert these inside the <code>http</code> block.</p>
<figure class="highlight plaintext"><figcaption><span>/etc/nginx/nginx.conf</span></figcaption><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">	listen 8000;</span><br><span class="line">	server_name yourdomain.com;</span><br><span class="line">	charset utf-8;</span><br><span class="line">	location / &#123;</span><br><span class="line">		root /home/dqwyy/www;</span><br><span class="line">		autoindex on;</span><br><span class="line">		autoindex_exact_size off;</span><br><span class="line">		autoindex_localtime on;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>So far we have completed the configuration, just reload it.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure>

<p>Then config the port forwarding on your router and now the files under <code>/home/dqwyy/www/</code> will be accessible on <a target="_blank" rel="noopener" href="http://yourdomain.com:8000/">http://yourdomain.com:8000</a>.</p>
<hr>
<span class="is-size-7">

<p>※ Cover image: <a target="_blank" rel="noopener" href="https://www.zdnet.com/article/russian-police-raid-nginx-moscow-office/">ZDNet</a></p>
</span></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Technology/">Technology</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/0008/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">近年來火狐瀏覽器介面更新版本記錄</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/0004/"><span class="level-item">Things To Do After Installing Kubuntu 22.04</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://blog.dqwyy.moe/0006/';
            this.page.identifier = '0006/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'dqwyy-blog' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://cdn.jsdelivr.net/gh/dqwyy/blog-img/0000/avatar.jpg" alt="dqwyy"></figure><p class="title is-size-4 is-block" style="line-height:inherit;"><b title="pronounced as Di&#039;kwee  /dɪˈkwiː/" style="cursor:help">dqwyy</b></p><p class="is-size-6 is-block"><i class="fas fa-envelope mr-2"></i>me<span style="display:none">佔位</span>@<span style="display:none">PLACEHOLDER</span>dqwyy<span>.</span>moe</p><p class="is-size-6"><i class="fas fa-map-marker-alt mr-2"></i><span>Teochew, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">3</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://dqwyy.moe" target="_blank" rel="noopener">ABOUT ME</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/dqwyy1997"><i class="fab fa-twitter" style="font-size:30px; color:#1c78e3;"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Steam" href="https://steamcommunity.com/id/dqwyy/"><i class="fab fa-steam" style="font-size:30px; color:#1c78e3;"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="GitHub" href="https://github.com/dqwyy"><i class="fab fa-github" style="font-size:30px; color:#1c78e3;"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Chinese/"><span class="level-start"><span class="level-item">Chinese</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/English/"><span class="level-start"><span class="level-item">English</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Language/"><span class="tag">Language</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Science/"><span class="tag">Science</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Technology/"><span class="tag">Technology</span><span class="tag">7</span></a></div></div></div></div></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen  order-3 is-sticky"><!--!--></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank"><img src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/cc-zero.svg" alt="CC0 1.0" title="CC0 1.0"></a><b style="margin-left:0.5em; font-size:20px; font-family:Nimbus Roman, FreeSerif, Times New Roman, Noto Serif, Serif;">DQWYY <img src="https://twemoji.maxcdn.com/v/latest/svg/1f1f8-1f1f4.svg" width="25" alt="★" title="flag of Somalia emoji by Twemoji"> BLOG</b><p class="is-size-7" style="margin-top:1ex;">Powered by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>, <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>, <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a> and <a href="https://bulma.io/" target="_blank" rel="noopener">Bulma</a>.</p><p class="is-size-7" style="text-transform:uppercase;"><a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank" style="color:#4a4a4a;">CC0 1.0</a> ⓪ 2017-<script>document.write( new Date().getFullYear() );</script> <a href="https://dqwyy.moe" target="_blank" style="color:#4a4a4a;">dqwyy</a>. No right reserved unless otherwise noted.</p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: false,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>